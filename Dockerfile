# =============================================================================
# üõ°Ô∏è EmergenceLab v5
# Dockerfile ‚Äî Production Research Environment
# Base Image : Python 3.11 (Slim)
# Purpose    : Real-Time Multi-Agent Simulation + Cognitive Dashboard
# =============================================================================


# -----------------------------------------------------------------------------
# üêç Base Runtime
# -----------------------------------------------------------------------------
FROM python:3.11-slim


# -----------------------------------------------------------------------------
# ‚öôÔ∏è System Dependencies
# High-concurrency networking support (eventlet / async stack)
# -----------------------------------------------------------------------------
RUN apt-get update && apt-get install -y \
    libevent-dev \
    build-essential \
    && rm -rf /var/lib/apt/lists/*


# -----------------------------------------------------------------------------
# üìÇ Application Workspace
# -----------------------------------------------------------------------------
WORKDIR /app


# -----------------------------------------------------------------------------
# üì¶ Install Python Dependencies
# -----------------------------------------------------------------------------
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt


# -----------------------------------------------------------------------------
# üß† Copy Project Source Code
# -----------------------------------------------------------------------------
COPY . .


# -----------------------------------------------------------------------------
# üìä Runtime Configuration
# -----------------------------------------------------------------------------
# Ensures logs stream directly to Render / Docker console
ENV PYTHONUNBUFFERED=1


# -----------------------------------------------------------------------------
# üåê Exposed Service Port
# -----------------------------------------------------------------------------
EXPOSE 5000


# -----------------------------------------------------------------------------
# üöÄ Launch Research Pipeline
# -----------------------------------------------------------------------------
CMD ["python", "-u", "run.py"]


# =============================================================================
# End of Docker Configuration
# =============================================================================